<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MouseGame: –†–µ–¥–∞–∫—Ç–æ—Ä —É—Ä–æ–≤–Ω–µ–π</title>
  
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Montserrat Semi Bold (600) -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      background: #111;
      color: #eee;
      text-align: center;
      padding: 20px;
      margin: 0;
      line-height: 1.4;
    }
    h1 {
      color: #0f0;
      margin-bottom: 10px;
      font-size: 28px;
    }
    .section {
      background: #1a1a1a;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      text-align: left;
    }
    label {
      display: block;
      margin: 10px 0 5px;
      color: #0f8;
    }
    input, textarea {
      width: 100%;
      padding: 8px;
      background: #222;
      border: 1px solid #444;
      color: #eee;
      border-radius: 4px;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
    }
    textarea {
      min-height: 100px;
      resize: vertical;
    }
    button {
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      font-size: 16px;
      padding: 10px 20px;
      margin: 10px 5px;
      cursor: pointer;
      background: #333;
      color: white;
      border: none;
      border-radius: 5px;
    }
    button:hover {
      background: #555;
    }
    .code-output {
      background: #000;
      color: #0f0;
      text-align: left;
      padding: 15px;
      border-radius: 8px;
      font-family: monospace;
      margin: 20px 0;
      white-space: pre-wrap;
      max-height: 400px;
      overflow-y: auto;
    }
    .controls {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    .group-item {
      margin: 10px 0;
      padding: 10px;
      background: #222;
      border-radius: 4px;
    }
    .remove-btn {
      background: #800;
      float: right;
      padding: 3px 8px;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <h1>MouseGame: –†–µ–¥–∞–∫—Ç–æ—Ä —É—Ä–æ–≤–Ω–µ–π</h1>
  <p>–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Å –∫–æ–¥–æ–º</p>

  <div class="section">
    <label for="levelNum">–ù–æ–º–µ—Ä —É—Ä–æ–≤–Ω—è</label>
    <input type="number" id="levelNum" min="1" value="3">

    <label for="finishPos">–ü–æ–∑–∏—Ü–∏—è —Ñ–∏–Ω–∏—à–∞ (L_FINISH)</label>
    <input type="number" id="finishPos" min="0" max="179" value="179">
  </div>

  <div class="section">
    <h3 style="color: #0f8; margin-top: 0;">–ì—Ä—É–ø–ø—ã –Ω–æ—Ä</h3>
    <div id="noraGroups">
      <div class="group-item">
        <label>–ì—Ä—É–ø–ø–∞ 1 (—Ü–µ–ø–æ—á–∫–∞ –ø–æ–∑–∏—Ü–∏–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
        <input type="text" class="nora-group" placeholder="1,53,169,40,69,100,102">
        <button class="remove-btn" style="display:none;">√ó</button>
      </div>
    </div>
    <button id="addNoraGroup">+ –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É</button>
  </div>

  <div class="section">
    <label for="bags">–ú–µ—à–∫–∏ (–ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
    <input type="text" id="bags" placeholder="5,14,27,44,55,65,72,84,97,106,115,128,141,149,164,176">
  </div>

  <div class="section">
    <label for="paths">–¢—Ä–æ–ø–∏–Ω–∫–∏ (–¥–∏–∞–ø–∞–∑–æ–Ω—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –Ω–∞–ø—Ä–∏–º–µ—Ä: 19-22,34-36,61)</label>
    <input type="text" id="paths" placeholder="19-22,34-36,48-52,61,89-93,119-123,133-135,145-146,156-159,170-173">
  </div>

  <div class="controls">
    <button id="generateBtn">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —É—Ä–æ–≤–Ω—è</button>
    <button id="copyBtn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä</button>
    <button id="resetBtn">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–æ—Ä–º—É</button>
  </div>

  <div class="code-output" id="codeOutput">
    // –ö–æ–¥ —É—Ä–æ–≤–Ω—è –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  </div>

  <div class="section" style="background: #151515;">
    <h3 style="color: #0f8; margin-top: 0;">–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</h3>
    <p>1. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É—Ä–æ–≤–Ω—è</p>
    <p>2. –ù–∞–∂–º–∏—Ç–µ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —É—Ä–æ–≤–Ω—è"</p>
    <p>3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ —Ñ—É–Ω–∫—Ü–∏—é fillList()</p>
    <p style="color: #ff0;">üí° –°–æ–≤–µ—Ç: –î–ª—è —Ñ–∏–Ω–∏—à–Ω–æ–π –Ω–æ—Ä—ã —É–∫–∞–∂–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –∫–∞–∫ networks[finishPos] = 182;</p>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const generateBtn = document.getElementById('generateBtn');
      const copyBtn = document.getElementById('copyBtn');
      const resetBtn = document.getElementById('resetBtn');
      const codeOutput = document.getElementById('codeOutput');
      const noraGroupsContainer = document.getElementById('noraGroups');
      const addNoraGroupBtn = document.getElementById('addNoraGroup');

      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –≥—Ä—É–ø–ø—ã –Ω–æ—Ä
      addNoraGroupBtn.addEventListener('click', () => {
        const groupCount = document.querySelectorAll('.nora-group').length + 1;
        const groupItem = document.createElement('div');
        groupItem.className = 'group-item';
        groupItem.innerHTML = `
          <label>–ì—Ä—É–ø–ø–∞ ${groupCount} (—Ü–µ–ø–æ—á–∫–∞ –ø–æ–∑–∏—Ü–∏–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
          <input type="text" class="nora-group" placeholder="8,9,174,131,68,70">
          <button class="remove-btn">√ó</button>
        `;
        noraGroupsContainer.appendChild(groupItem);
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É–¥–∞–ª–µ–Ω–∏—è
        groupItem.querySelector('.remove-btn').addEventListener('click', () => {
          groupItem.remove();
          // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –≥—Ä—É–ø–ø—ã
          document.querySelectorAll('.group-item').forEach((item, i) => {
            const label = item.querySelector('label');
            label.textContent = `–ì—Ä—É–ø–ø–∞ ${i + 1} (—Ü–µ–ø–æ—á–∫–∞ –ø–æ–∑–∏—Ü–∏–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)`;
          });
        });
      });

      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ —É—Ä–æ–≤–Ω—è
      generateBtn.addEventListener('click', () => {
        const levelNum = document.getElementById('levelNum').value;
        const finishPos = document.getElementById('finishPos').value;
        const noraGroups = document.querySelectorAll('.nora-group');
        const bagsInput = document.getElementById('bags').value;
        const pathsInput = document.getElementById('paths').value;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
        if (!levelNum || !finishPos) {
          codeOutput.textContent = '// –û—à–∏–±–∫–∞: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–æ–º–µ—Ä —É—Ä–æ–≤–Ω—è –∏ –ø–æ–∑–∏—Ü–∏—é —Ñ–∏–Ω–∏—à–∞';
          return;
        }

        // –§–æ—Ä–º–∏—Ä—É–µ–º –∫–æ–¥ —É—Ä–æ–≤–Ω—è
        let code = `else if (level == ${levelNum}) {  // –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ MouseGame Level Generator\n`;
        code += `    L_FINISH = ${finishPos};\n`;
        code += `    networks[0] = 181;\n`;
        code += `    networks[${finishPos}] = 182;\n`;
        code += `    currPos = 0;\n\n`;

        // –ì—Ä—É–ø–ø—ã –Ω–æ—Ä
        if (noraGroups.length > 0) {
          code += `    // –°–µ—Ç–∏ –Ω–æ—Ä\n`;
          
          noraGroups.forEach((group, index) => {
            const positions = group.querySelector('input').value.trim();
            if (!positions) return;
            
            const posArray = positions.split(',').map(p => p.trim()).filter(p => p);
            if (posArray.length < 2) return;
            
            const groupName = index + 1;
            code += `    networks[${posArray[0]}] = ${posArray[1]}; // –ì—Ä—É–ø–ø–∞ ${groupName}\n`;
            
            for (let i = 1; i < posArray.length - 1; i++) {
              code += `    networks[${posArray[i]}] = ${posArray[i + 1]};\n`;
            }
            
            // –ü–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –∑–∞–º—ã–∫–∞–µ—Ç —Ü–∏–∫–ª
            code += `    networks[${posArray[posArray.length - 1]}] = ${posArray[0]};\n\n`;
          });
          
          // –§–∏–Ω–∏—à–Ω–∞—è –Ω–æ—Ä–∞ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞)
          if (finishPos != 179) {
            const lastGroupNum = noraGroups.length + 1;
            code += `    networks[${finishPos - 1}] = ${finishPos};  // –ì—Ä—É–ø–ø–∞ ${lastGroupNum} (win)\n`;
            code += `    networks[${finishPos}] = 182;\n\n`;
          }
        }

        // –ú–µ—à–∫–∏
        if (bagsInput.trim()) {
          code += `    // –ú–µ—à–∫–∏\n`;
          const bags = bagsInput.split(',').map(b => b.trim()).filter(b => b);
          bags.forEach(bag => {
            code += `    networks[${bag}] = 183;\n`;
          });
          code += `\n`;
        }

        // –¢—Ä–æ–ø–∏–Ω–∫–∏
        if (pathsInput.trim()) {
          code += `    // –¢—Ä–æ–ø–∏–Ω–∫–∏\n`;
          const paths = pathsInput.split(',').map(p => p.trim()).filter(p => p);
          paths.forEach((path, index) => {
            const pathNum = index + 1;
            if (path.includes('-')) {
              const [start, end] = path.split('-');
              code += `    for (int i = ${start}; i <= ${end}; i++) networks[i] = 185;  // –¢—Ä–æ–ø–∏–Ω–∫–∞ ${pathNum}\n`;
            } else {
              code += `    networks[${path}] = 185;  // –¢—Ä–æ–ø–∏–Ω–∫–∞ ${pathNum}\n`;
            }
          });
        }

        code += `  }`;
        codeOutput.textContent = code;
      });

      // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä
      copyBtn.addEventListener('click', () => {
        const text = codeOutput.textContent;
        navigator.clipboard.writeText(text).then(() => {
          const originalText = copyBtn.textContent;
          copyBtn.textContent = '‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
          setTimeout(() => {
            copyBtn.textContent = originalText;
          }, 2000);
        });
      });

      // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
      resetBtn.addEventListener('click', () => {
        document.getElementById('levelNum').value = '3';
        document.getElementById('finishPos').value = '179';
        document.getElementById('bags').value = '';
        document.getElementById('paths').value = '';
        
        // –û—á–∏—â–∞–µ–º –≥—Ä—É–ø–ø—ã –Ω–æ—Ä –∫—Ä–æ–º–µ –ø–µ—Ä–≤–æ–π
        const groups = document.querySelectorAll('.group-item');
        for (let i = 1; i < groups.length; i++) {
          groups[i].remove();
        }
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é –≥—Ä—É–ø–ø—É
        document.querySelector('.nora-group').value = '';
        
        codeOutput.textContent = '// –ö–æ–¥ —É—Ä–æ–≤–Ω—è –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏';
      });

      // –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã –ø—Ä–∏ –∫–ª–∏–∫–µ (–¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≥—Ä—É–ø–ø)
      document.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          this.closest('.group-item').remove();
        });
      });
    });
  </script>
</body>
</html>